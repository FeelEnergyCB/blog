<time>2016-10-16</time>
# Pomodoro таймер на arduino

В рамках этой статьи я опишу как можно сделать несложный таймер с помощью arduino для time management техники [Pomodoro](https://en.wikipedia.org/wiki/Pomodoro_Technique).

## Компоненты
Для осуществления задумки нам понадобятся:
- Arduino. В моем варианте это Arduino nano, но можно использовать и любой другой вид. Все зависит от размеров итоговой конструкции.
- Тактовая кнопка
- 6 светодиодов. Цвета не столь важны, главное чтобы 4 из них были одинаковые.
- 6 резисторов (200 - 330 Ом).
- Провода
- Плата, где будут крепиться компоненты.


### Схема подключения
![](posts/images/pomodoro/1.jpg)
[Ссылка на circuits.io](https://circuits.io/circuits/2956930-pomodoro-timer).

### Программная часть
В приведенный ниже коде прошивки заданы следующие временные интервал:
Время основной части pomodoro - 25 минут.
Время короткого и длинного перерыва соответственно 5 и 15 минут.
Они задаются переменными **pomodorTime**, **shortBreak** и **longBreak**.

Порты светодиодов выбраны специально с поддержкой ШИМ, для возможности установки слабого свечение.

Алгоритм работы таймера:
1) При подключении питания запускается анимация всех светодиодов и ожидание нажатия кнопки.
2) После нажатия кнопки запускается отсчет первого pomodoro. Время выполнения его показывают 4 красных светодиода. Нажатие кнопки до завершения pomodoro вызовет сброс отсчета.
3) По истечению отсчета pomodoro, мигающие красные светодиоды отобразят количество завершенных, на данный момент, pomodoro в двоичной системе счисления. Максимальное значение завершенных pomodoro - 15 (1111). После максимального значения счетчик сбросится автоматически.
4) По нажатию на кнопку таймер перейдет в режим короткого перерыва. После каждых 3-х pomodoro - в режим длинного перерыва. При этом загорится соответствующий светодиод и начнется отсчет по принципу шагу 2. Нажатие кнопки до завершения перерыва ни к чему не приведет.
5) По истечению перерыва, мигающие красные светодиоды так же отобразят количество завершенных, на данный момент, pomodoro. Одновременно с ними будет мигать светодиод соответствующий текущему типу перерыва.

Далее программа будет выполняться заново с пункта 2.
[Ссылка на код](https://dl.dropboxusercontent.com/u/80313909/pomodoro.ino).

### Финальная версия
![](posts/images/pomodoro/2.jpg)